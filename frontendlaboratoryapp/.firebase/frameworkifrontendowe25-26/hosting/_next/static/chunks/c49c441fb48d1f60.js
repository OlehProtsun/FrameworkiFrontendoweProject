(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87063,e=>{"use strict";var r=e.i(2939),t=e.i(7199);e.i(54259);var s=e.i(84541),l=e.i(13613),a=e.i(69670);let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d=["DOG","CAT","MOUSE","TIGER","LION"],n={lineColor:"#38bdf8",lineWidth:1,fontFamily:"system-ui",theme:"dark"};function i(e,r){let t=e.map(e=>e.toUpperCase()),s=Array.from({length:r},()=>Array.from({length:r},()=>null)),l=[{dr:0,dc:1},{dr:0,dc:-1},{dr:1,dc:0},{dr:-1,dc:0},{dr:1,dc:1},{dr:1,dc:-1},{dr:-1,dc:1},{dr:-1,dc:-1}];t.forEach(e=>{let t=e.length;for(let a=0;a<200;a++){let a=l[Math.floor(Math.random()*l.length)],o=Math.floor(Math.random()*r),d=Math.floor(Math.random()*r),n=o+a.dr*(t-1),i=d+a.dc*(t-1);if(n<0||n>=r||i<0||i>=r)continue;let c=!0;for(let r=0;r<t;r++){let t=o+a.dr*r,l=d+a.dc*r,n=s[t][l];if(null!==n&&n!==e[r]){c=!1;break}}if(c){for(let r=0;r<t;r++){let t=o+a.dr*r,l=d+a.dc*r;s[t][l]=e[r]}return}}});for(let e=0;e<r;e++)for(let t=0;t<r;t++)if(!s[e][t]){let r=o[Math.floor(Math.random()*o.length)];s[e][t]=r}return s}function c({gameId:e}){var o;let{user:c}=(0,a.useAuth)(),[x,h]=(0,t.useState)(!0),[u,m]=(0,t.useState)(""),[p,f]=(0,t.useState)([]),[g,b]=(0,t.useState)(10),[y,w]=(0,t.useState)([]),[j,v]=(0,t.useState)([]),[N,C]=(0,t.useState)([]),[S,k]=(0,t.useState)(n),[M,_]=(0,t.useState)([]),[W,E]=(0,t.useState)(!1),[U,A]=(0,t.useState)(new Set),[D,F]=(0,t.useState)(!1),[$,T]=(0,t.useState)(!1);(0,t.useEffect)(()=>{c&&e&&(async()=>{h(!0),m("");try{let r=(0,s.doc)(l.db,"wordsearchGames",e),t=await (0,s.getDoc)(r);if(!t.exists()){let e={userUid:c.uid,title:"Default wordsearch",gridSize:10,foundWords:[],remainingWords:d,boardConfig:n};await (0,s.setDoc)(r,e),t=await (0,s.getDoc)(r)}let a=t.data(),o=(a.foundWords||[]).map(e=>e.toUpperCase()),x=(a.remainingWords||[]).map(e=>e.toUpperCase()),h=a.gridSize||10,u=a.boardConfig||{},m=[...o,...x],p=i(m,h),g=new Set;o.forEach(e=>{(function(e,r){let t=e.length,s=r.toUpperCase(),l=[{dr:0,dc:1},{dr:0,dc:-1},{dr:1,dc:0},{dr:-1,dc:0},{dr:1,dc:1},{dr:1,dc:-1},{dr:-1,dc:1},{dr:-1,dc:-1}];for(let r=0;r<t;r++)for(let a=0;a<t;a++)if(e[r][a]===s[0])for(let o of l){let l=[{row:r,col:a}],d=r,n=a,i=1;for(;i<s.length&&(d+=o.dr,n+=o.dc,!(d<0)&&!(d>=t)&&!(n<0)&&!(n>=t)&&e[d][n]===s[i]);i++)l.push({row:d,col:n});if(i===s.length)return l}return[]})(p,e).forEach(({row:e,col:r})=>g.add(`${e}-${r}`))}),f(p),b(h),w(m),v(o),C(x),k({...n,...u}),A(g)}catch(e){console.error("loadGame error:",e),m("Nie udaÅ‚o siÄ™ zaÅ‚adowaÄ‡ gry z Firestore.")}finally{h(!1)}})()},[c,e]);let z=y.length||j.length+N.length,G=z>0?Math.round(j.length/z*100):0,B=z>0&&j.length===z,L=(o=S.lineWidth)&&!(o<=1)?2===o?"border-2":"border-[3px]":"border",R=S.lineColor||"#38bdf8",O=async()=>{if(!W)return;if(E(!1),!M.length)return void _([]);let r=M.map(({row:e,col:r})=>p[e][r]).join("").toUpperCase();if(N.includes(r)){let t=[...j,r],a=N.filter(e=>e!==r);v(t),C(a),A(e=>{let r=new Set(e);return M.forEach(({row:e,col:t})=>r.add(`${e}-${t}`)),r}),_([]);try{let t=(0,s.doc)(l.db,"wordsearchGames",e);await (0,s.updateDoc)(t,{foundWords:(0,s.arrayUnion)(r),remainingWords:(0,s.arrayRemove)(r)})}catch(e){console.error("Error updating Firestore:",e)}}else _([])},P=async()=>{if(y.length){f(i(y,g||10)),v([]),C(y),A(new Set),_([]);try{let r=(0,s.doc)(l.db,"wordsearchGames",e);await (0,s.updateDoc)(r,{foundWords:[],remainingWords:y})}catch(e){console.error("Error resetting game:",e)}}},I=async r=>{let t={...S,...r};k(t);try{T(!0);let r=(0,s.doc)(l.db,"wordsearchGames",e);await (0,s.updateDoc)(r,{boardConfig:t})}catch(e){console.error("Error updating board config:",e)}finally{T(!1)}};return c?x?(0,r.jsx)("div",{className:"rounded-3xl border border-white/10 bg-slate-950/80 px-4 py-6 text-sm text-slate-200 shadow-[0_18px_55px_rgba(15,23,42,0.9)]",children:"Loading wordsearch..."}):u?(0,r.jsx)("div",{className:"rounded-3xl border border-rose-500/30 bg-rose-500/10 px-4 py-6 text-sm text-rose-100 shadow-[0_18px_55px_rgba(15,23,42,0.9)]",children:u}):(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Wordsearch"}),(0,r.jsx)("p",{className:"text-sm text-slate-200",children:"Select words horizontally, vertically or diagonally."})]}),B&&(0,r.jsxs)("div",{className:"inline-flex items-center rounded-2xl border border-emerald-400/40 bg-emerald-400/10 pl-1.5 pr-3 py-1.5 text-xs font-medium text-emerald-100",children:[(0,r.jsx)("span",{className:"mr-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-400 text-slate-950",children:"âœ“"}),"All words found â€“ great job!"]})]}),(0,r.jsxs)("div",{className:"space-y-3 rounded-3xl border border-white/10 bg-slate-950/80 px-4 py-3 shadow-[0_18px_55px_rgba(15,23,42,0.9)]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[(0,r.jsx)("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[j.length," / ",z," words (",G,"%)"]})]}),(0,r.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-slate-900/80",children:(0,r.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 via-sky-500 to-violet-500 transition-[width] duration-300",style:{width:`${G}%`}})}),B&&(0,r.jsx)("div",{className:"pt-1",children:(0,r.jsx)("button",{type:"button",onClick:P,className:"inline-flex items-center rounded-2xl bg-gradient-to-r from-sky-500 via-indigo-500 to-violet-500 px-3 py-1.5 text-xs font-medium text-white shadow-[0_8px_24px_rgba(56,189,248,0.55)] hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:ring-offset-2 focus:ring-offset-slate-950",children:"Restart game"})})]}),(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,2.3fr)_minmax(0,1fr)] items-start",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"inline-flex flex-col gap-2 rounded-3xl border border-white/10 bg-slate-950/80 p-4 shadow-[0_18px_55px_rgba(15,23,42,0.9)]",onMouseUp:O,onMouseLeave:O,children:(0,r.jsx)("div",{className:"grid gap-1.5",style:{gridTemplateColumns:`repeat(${p.length}, minmax(0, 1fr))`},children:p.map((e,t)=>e.map((e,s)=>{let l=`${t}-${s}`,a=U.has(l),o=M.some(e=>e.row===t&&e.col===s),d="bg-slate-900/60 border-slate-700 text-slate-100 hover:border-sky-500/60 cursor-pointer";return a?d="bg-emerald-500/30 border-emerald-400 text-emerald-50":o&&(d="bg-sky-500/30 border-sky-400 text-sky-50"),(0,r.jsx)("button",{type:"button",onMouseDown:()=>{E(!0),_([{row:t,col:s}])},onMouseEnter:()=>{_(e=>{if(!W||e.some(e=>e.row===t&&e.col===s))return e;if(0===e.length)return[{row:t,col:s}];if(1===e.length)return[...e,{row:t,col:s}];let r=e[0],l=e[1],a=Math.sign(l.row-r.row),o=Math.sign(l.col-r.col),d=e[e.length-1];return t===d.row+a&&s===d.col+o?[...e,{row:t,col:s}]:e})},className:`flex h-8 w-8 items-center justify-center rounded-lg text-sm font-semibold transition ${L} ${d}`,style:{fontFamily:S.fontFamily,borderColor:o||a?R:void 0},children:e},l)}))})}),(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Found words"}),0===j.length?(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"You haven't found any words yet."}):(0,r.jsx)("ul",{className:"space-y-1 text-xs text-emerald-100",children:j.map(e=>(0,r.jsx)("li",{className:"line-through decoration-emerald-400",children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-sky-300",children:"Remaining words"}),N.length>0&&(0,r.jsxs)("button",{type:"button",onClick:()=>F(e=>!e),className:"inline-flex items-center gap-1 rounded-xl border border-white/10 bg-white/5 px-2 py-1 text-[10px] text-slate-100 hover:bg-white/10 focus:outline-none focus:ring-1 focus:ring-sky-400/70",children:[(0,r.jsx)("span",{children:D?"Hide":"Show"}),D?(0,r.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"h-3.5 w-3.5",children:(0,r.jsx)("path",{d:"M4.2 4.2 3 5.4l3.1 3.1C4 9.7 2.4 11.6 1.5 12c1.6 3.9 5.5 7 10.5 7 1.7 0 3.3-.3 4.8-.9l3.2 3.2 1.2-1.2zM12 17c-2.8 0-5-2.2-5-5 0-.5.1-1 .2-1.5l1.7 1.7a3 3 0 0 0 3.6 3.6l1.7 1.7c-.5.1-1 .2-1.5.2zm9-5c-.5-1.2-1.3-2.4-2.4-3.5A10.8 10.8 0 0 0 12 5c-.8 0-1.6.1-2.3.3L8 3.6C9.3 3.2 10.7 3 12 3c5 0 8.9 3.1 10.5 7-.3.8-.8 1.5-1.5 2.4z",fill:"currentColor"})}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"h-3.5 w-3.5",children:[(0,r.jsx)("path",{d:"M12 5C7 5 3.1 8.1 1.5 12c1.6 3.9 5.5 7 10.5 7s8.9-3.1 10.5-7C20.9 8.1 17 5 12 5Zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z",fill:"currentColor",opacity:"0.9"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]})]})]}),0===N.length?(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"All words found ðŸŽ‰"}):(0,r.jsx)("ul",{className:"space-y-1 text-xs text-sky-100",children:N.map(e=>{let t="â€¢".repeat(e.length);return(0,r.jsx)("li",{children:D?e:t},e)})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3 rounded-3xl border border-white/10 bg-slate-950/80 px-3 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-400",children:"Board appearance"}),$&&(0,r.jsx)("span",{className:"text-[10px] text-slate-500",children:"Savingâ€¦"})]}),(0,r.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:"Line color"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"color",value:S.lineColor,onChange:e=>I({lineColor:e.target.value}),className:"h-8 w-8 cursor-pointer rounded-lg border border-white/20 bg-transparent p-0"}),(0,r.jsx)("span",{className:"text-[10px] text-slate-400",children:S.lineColor})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:"Line width"}),(0,r.jsxs)("select",{value:S.lineWidth,onChange:e=>I({lineWidth:Number(e.target.value)}),className:"w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-2 py-1.5 text-[11px] text-slate-100 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-500/40",children:[(0,r.jsx)("option",{value:1,children:"Thin"}),(0,r.jsx)("option",{value:2,children:"Medium"}),(0,r.jsx)("option",{value:3,children:"Bold"})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:"Font"}),(0,r.jsxs)("select",{value:S.fontFamily,onChange:e=>I({fontFamily:e.target.value}),className:"w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-2 py-1.5 text-[11px] text-slate-100 focus:border-sky-400 focus:outline-none focus:ring-1 focus:ring-sky-500/40",children:[(0,r.jsx)("option",{value:"system-ui",children:"System"}),(0,r.jsx)("option",{value:"ui-monospace",children:"Monospace"}),(0,r.jsx)("option",{value:"serif",children:"Serif"})]})]})]})]})]})]}):null}e.s(["default",()=>c])}]);