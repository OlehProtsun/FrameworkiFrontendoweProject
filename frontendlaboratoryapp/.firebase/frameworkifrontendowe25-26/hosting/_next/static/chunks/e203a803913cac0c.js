(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28996,e=>{"use strict";var s=e.i(2939),t=e.i(7199),a=e.i(69670);e.i(98887);var l=e.i(20850),r=e.i(13613);e.i(54259);var o=e.i(84541);function i(){let{user:e}=(0,a.useAuth)(),[i,d]=(0,t.useState)(""),[c,n]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[x,p]=(0,t.useState)(""),[b,h]=(0,t.useState)(""),[f,y]=(0,t.useState)(!0);if(!e)return null;let g=e.displayName||"",v=e.photoURL||"";(0,t.useEffect)(()=>{(async()=>{try{let s=await (0,o.getDoc)((0,o.doc)(r.db,"users",e.uid));if(s.exists()){let e=s.data().address||{};m(e.city||""),p(e.street||""),h(e.zipCode||"")}else m(""),p(""),h("")}catch(e){console.error(e),d("Nie udało się pobrać adresu użytkownika.")}finally{y(!1)}})()},[e,r.db]);let N=async s=>{s.preventDefault(),d(""),n("");let t=s.currentTarget,a=t.displayName.value,i=t.photoURL.value;try{await (0,l.updateProfile)(e,{displayName:a,photoURL:i}),await (0,o.setDoc)((0,o.doc)(r.db,"users",e.uid),{address:{city:u,street:x,zipCode:b}},{merge:!0}),n("Profile updated successfully.")}catch(e){console.error(e),d("Nie udało się zaktualizować profilu lub adresu.")}},w=e.displayName?.[0]||e.email?.[0]||"U";return(0,s.jsx)("div",{className:"flex min-h-[60vh] items-start justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-xl",children:(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/80 shadow-[0_18px_55px_rgba(15,23,42,0.9)] backdrop-blur-2xl",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute inset-x-16 -top-32 h-40 rounded-full bg-gradient-to-b from-sky-500/40 via-indigo-500/25 to-transparent blur-3xl"}),(0,s.jsxs)("div",{className:"relative p-6 sm:p-7",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[v?(0,s.jsx)("img",{src:v,alt:"Profile avatar",className:"h-16 w-16 rounded-2xl border border-white/20 object-cover shadow-lg"}):(0,s.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl border border-white/15 bg-gradient-to-tr from-sky-500 via-indigo-500 to-violet-500 text-xl font-semibold text-white shadow-[0_10px_30px_rgba(56,189,248,0.7)]",children:w.toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Profile"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-slate-50",children:e.displayName||"Unnamed user"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:e.email})]})]}),i&&(0,s.jsx)("div",{className:"mb-4 rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-100",children:i}),c&&(0,s.jsx)("div",{className:"mb-4 rounded-2xl border border-emerald-400/30 bg-emerald-400/10 px-4 py-3 text-sm text-emerald-100",children:c}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Display name"}),(0,s.jsx)("input",{id:"displayName",name:"displayName",type:"text",defaultValue:g,className:"block w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-3.5 py-2.5 text-sm text-slate-50 placeholder-slate-500 shadow-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Your name"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Email (read-only)"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",value:e.email||"",readOnly:!0,className:"block w-full cursor-not-allowed rounded-2xl border border-slate-800 bg-slate-900/80 px-3.5 py-2.5 text-sm text-slate-500"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"photoURL",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Profile photo URL"}),(0,s.jsx)("input",{id:"photoURL",name:"photoURL",type:"url",defaultValue:v,className:"block w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-3.5 py-2.5 text-sm text-slate-50 placeholder-slate-500 shadow-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"https://..."})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"space-y-1.5 sm:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"street",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Street"}),(0,s.jsx)("input",{id:"street",name:"street",type:"text",value:x,onChange:e=>p(e.target.value),disabled:f,className:"block w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-3.5 py-2.5 text-sm text-slate-50 placeholder-slate-500 shadow-sm disabled:opacity-50 disabled:cursor-wait focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Street and number"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"zipCode",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"Zip code"}),(0,s.jsx)("input",{id:"zipCode",name:"zipCode",type:"text",value:b,onChange:e=>h(e.target.value),disabled:f,className:"block w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-3.5 py-2.5 text-sm text-slate-50 placeholder-slate-500 shadow-sm disabled:opacity-50 disabled:cursor-wait focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"00-000"})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-xs font-medium uppercase tracking-wide text-slate-400",children:"City"}),(0,s.jsx)("input",{id:"city",name:"city",type:"text",value:u,onChange:e=>m(e.target.value),disabled:f,className:"block w-full rounded-2xl border border-slate-700 bg-slate-900/70 px-3.5 py-2.5 text-sm text-slate-50 placeholder-slate-500 shadow-sm disabled:opacity-50 disabled:cursor-wait focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Your city"})]}),(0,s.jsx)("button",{type:"submit",className:"mt-2 inline-flex items-center justify-center rounded-2xl bg-gradient-to-r from-sky-500 via-indigo-500 to-violet-500 px-4 py-2.5 text-sm font-medium text-white shadow-[0_8px_24px_rgba(56,189,248,0.55)] transition hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:ring-offset-2 focus:ring-offset-slate-950",disabled:f,children:f?"Loading address...":"Save changes"})]})]})]})})})}e.s(["default",()=>i])}]);